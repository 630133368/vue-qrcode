<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="./src/qrcode.js"></script>
</head>
<body>
    <div id="container">

    </div>
    
    <script>
        var createCanvas = function(){
			// create the qrcode itself
			var qrcode	= new QRCode(options.typeNumber, options.correctLevel);
			qrcode.addData(options.text);
			qrcode.make();

			// create canvas element
			var canvas	= document.createElement('canvas');
			canvas.width	= options.width;
            canvas.height	= options.height + 50;
            canvas.id = 'qrcode';
			var ctx		= canvas.getContext('2d');

			// compute tileW/tileH based on options.width/options.height
			var tileW	= options.width  / qrcode.getModuleCount();
			var tileH	= options.height / qrcode.getModuleCount();
			// draw in the canvas
			for( var row = 0; row < qrcode.getModuleCount(); row++ ){
				for( var col = 0; col < qrcode.getModuleCount(); col++ ){
					ctx.fillStyle = qrcode.isDark(row, col) ? options.foreground : options.background;
					var w = (Math.ceil((col+1)*tileW) - Math.floor(col*tileW));
					var h = (Math.ceil((row+1)*tileH) - Math.floor(row*tileH));
					ctx.fillRect(Math.round(col*tileW),Math.round(row*tileH), w, h);  
				}	
			}
			// return just built canvas
			return canvas;
		}
        const options = {
            background: "#fff",
            correctLevel: 2,
            foreground: "red",
            height: 300,
            render: "table",
            text: "http://www.baidu.com",
            typeNumber: -1,
            width: 300,
        };
        const container = document.getElementById('container');
        container.appendChild(createCanvas());
        const canvas = document.getElementById('qrcode');
        const ctx = canvas.getContext('2d');
        var imgObj = new Image();
        imgObj.src = "http://images.cnblogs.com/cnblogs_com/html5test/359114/r_test.jpg";
        imgObj.onload = function(){
            imgObj.width = 100;
            imgObj.height = 100;
            ctx.drawImage(this, 90, 90, 120, 120);//this即是imgObj,保持图片的原始大小：470*480
        }
        console.log(ctx);
    </script>
</body>
</html>